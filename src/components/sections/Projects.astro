---
import AstroIcon from '@/components/icons/AstroIcon.astro'
import DockerIcon from '@/components/icons/DockerIcon.astro'
import ExternalLinkIcon from '@/components/icons/ExternalLinkIcon.astro'
import FigmaIcon from '@/components/icons/FigmaIcon.astro'
import GithubIcon from '@/components/icons/GithubIcon.astro'
import JavaIcon from '@/components/icons/JavaIcon.astro'
import NextJsIcon from '@/components/icons/NextJsIcon.astro'
import PostgreSQLIcon from '@/components/icons/PostgreSQLIcon.astro'
import ReactIcon from '@/components/icons/ReactIcon.astro'
import ShadcnIcon from '@/components/icons/ShadcnIcon.astro'
import SpringBootIcon from '@/components/icons/SpringBootIcon.astro'
import SwaggerIcon from '@/components/icons/SwaggerIcon.astro'
import TailwindIcon from '@/components/icons/TailwindIcon.astro'
import TypeScriptIcon from '@/components/icons/TypeScriptIcon.astro'
import VercelIcon from '@/components/icons/VercelIcon.astro'
import ViteIcon from '@/components/icons/ViteIcon.astro'
import Badge from '@/components/ui/Badge.astro'
import Button from '@/components/ui/Button.astro'
import { sectionIds, useTranslations } from '@/i18n'

const lang = Astro.locals.lang
const t = useTranslations(lang)

const projects = [
  {
    key: 'marketingvip',
    title: t('projects.marketingvip.title'),
    description: t('projects.marketingvip.description'),
    image: '/images/projects/marketingvip.webp',
    technologies: [
      { label: 'TypeScript', icon: TypeScriptIcon },
      { label: 'Astro', icon: AstroIcon },
      { label: 'Tailwind CSS', icon: TailwindIcon },
      { label: 'Vite', icon: ViteIcon },
      { label: 'Vercel', icon: VercelIcon },
    ],
    liveUrl: 'https://marketingvip.co',
    figmaUrl:
      'https://www.figma.com/design/Nj6Ozif6zH9gqsjhbFKu1w/Marketing-Vip-New-Web?m=auto&t=KoCklLezvJWwbCFU-6',
  },
  {
    key: 'finiva',
    title: t('projects.finiva.title'),
    description: t('projects.finiva.description'),
    image: '/images/projects/finiva.webp',
    technologies: [
      { label: 'TypeScript', icon: TypeScriptIcon },
      { label: 'Astro', icon: AstroIcon },
      { label: 'Tailwind CSS', icon: TailwindIcon },
      { label: 'Vite', icon: ViteIcon },
      { label: 'Vercel', icon: VercelIcon },
    ],
    liveUrl: 'https://finiva-app.vercel.app',
    figmaUrl:
      'https://www.figma.com/design/PunxRNCWAihlEqlKc5xMw2/Finiva-Landing?m=auto&t=KoCklLezvJWwbCFU-6',
  },
  {
    key: 'bookstudio',
    title: t('projects.bookstudio.title'),
    description: t('projects.bookstudio.description'),
    image: {
      light: '/images/projects/bookstudio-light.webp',
      dark: '/images/projects/bookstudio-dark.webp',
    },
    technologies: [
      { label: 'TypeScript', icon: TypeScriptIcon },
      { label: 'Next.js', icon: NextJsIcon },
      { label: 'React', icon: ReactIcon },
      { label: 'Tailwind CSS', icon: TailwindIcon },
      { label: 'shadcn/ui', icon: ShadcnIcon },
    ],
    liveUrl: 'https://bookstudio-site.vercel.app',
    githubUrl: 'https://github.com/jaycodev/bookstudio',
  },
  {
    key: 'bookstudio-api',
    title: t('projects.bookstudioApi.title'),
    description: t('projects.bookstudioApi.description'),
    image: {
      light: '/images/projects/bookstudio-api-light.webp',
      dark: '/images/projects/bookstudio-api-dark.webp',
    },
    technologies: [
      { label: 'Java', icon: JavaIcon },
      { label: 'Spring Boot', icon: SpringBootIcon },
      { label: 'PostgreSQL', icon: PostgreSQLIcon },
      { label: 'Docker', icon: DockerIcon },
      { label: 'OpenAPI', icon: SwaggerIcon },
    ],
    liveUrl: 'https://api-bookstudio.onrender.com',
    githubUrl: 'https://github.com/jaycodev/bookstudio-api',
  },
  {
    key: 'areska',
    title: t('projects.areska.title'),
    description: t('projects.areska.description'),
    image: {
      light: '/images/projects/areska-light.webp',
      dark: '/images/projects/areska-dark.webp',
    },
    technologies: [
      { label: 'TypeScript', icon: TypeScriptIcon },
      { label: 'Next.js', icon: NextJsIcon },
      { label: 'React', icon: ReactIcon },
      { label: 'Tailwind CSS', icon: TailwindIcon },
      { label: 'shadcn/ui', icon: ShadcnIcon },
    ],
    liveUrl: 'https://areska.vercel.app',
    githubUrl: 'https://github.com/jaycodev/areska',
  },
  {
    key: 'areska-api',
    title: t('projects.areskaApi.title'),
    description: t('projects.areskaApi.description'),
    image: {
      light: '/images/projects/areska-api-light.webp',
      dark: '/images/projects/areska-api-dark.webp',
    },
    technologies: [
      { label: 'Java', icon: JavaIcon },
      { label: 'Spring Boot', icon: SpringBootIcon },
      { label: 'PostgreSQL', icon: PostgreSQLIcon },
      { label: 'Docker', icon: DockerIcon },
      { label: 'OpenAPI', icon: SwaggerIcon },
    ],
    liveUrl: 'https://api-areska.onrender.com',
    githubUrl: 'https://github.com/jaycodev/areska-api',
  },
]
---

<section id={sectionIds[lang].projects} class="relative py-25 px-6">
  <div class="max-w-screen-md mx-auto">
    <div class="text-center mb-12">
      <Badge class="mb-4" data-i18n="projects.badge">{t('projects.badge')}</Badge>
      <h2 class="text-4xl sm:text-5xl font-bold tracking-tight" data-i18n="projects.title">
        {t('projects.title')}
      </h2>
      <p class="text-muted-foreground mt-2 sm:mt-4 text-lg" data-i18n="projects.subtitle">
        {t('projects.subtitle')}
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {
        projects.map((project) => (
          <div class="group relative flex flex-col overflow-hidden rounded-xl border transition-all hover:border-gray-400 dark:hover:border-white/30">
            <div class="relative h-64 overflow-hidden bg-accent">
              {typeof project.image === 'string' ? (
                <img
                  src={project.image}
                  alt={project.title}
                  class="object-cover w-full h-full transition-transform duration-300 group-hover:scale-105"
                />
              ) : (
                <>
                  <img
                    src={project.image.light}
                    alt={project.title}
                    class="object-cover w-full h-full transition-transform duration-300 group-hover:scale-105 block dark:hidden"
                  />
                  <img
                    src={project.image.dark}
                    alt={project.title}
                    class="object-cover w-full h-full transition-transform duration-300 group-hover:scale-105 hidden dark:block"
                  />
                </>
              )}
            </div>

            <div class="flex-1 flex flex-col p-6">
              <h3 class="text-xl font-semibold mb-2" data-i18n={`projects.${project.key}.title`}>
                {project.title}
              </h3>
              <p
                class="text-muted-foreground mb-4"
                data-i18n={`projects.${project.key}.description`}
              >
                {project.description}
              </p>

              <div class="flex flex-wrap gap-2 mb-6">
                {project.technologies.map(({ label, icon: Icon }) => (
                  <Badge key={label} variant="outline" class="flex items-center gap-1">
                    {Icon && <Icon class="size-3" />}
                    {label}
                  </Badge>
                ))}
              </div>

              <div class="flex gap-3 mt-auto">
                {project.githubUrl && (
                  <a href={project.githubUrl} target="_blank" rel="noopener noreferrer">
                    <Button variant="secondary">
                      <GithubIcon class="size-4" />
                      <span data-i18n="projects.cta.code">{t('projects.cta.code')}</span>
                    </Button>
                  </a>
                )}
                {project.figmaUrl && (
                  <a href={project.figmaUrl} target="_blank" rel="noopener noreferrer">
                    <Button variant="secondary">
                      <FigmaIcon class="size-4" />
                      <span data-i18n="projects.cta.figma">{t('projects.cta.figma')}</span>
                    </Button>
                  </a>
                )}
                {project.liveUrl && (
                  <a href={project.liveUrl} target="_blank" rel="noopener noreferrer">
                    <Button>
                      <ExternalLinkIcon class="size-4" />
                      <span data-i18n="projects.cta.preview">{t('projects.cta.preview')}</span>
                    </Button>
                  </a>
                )}
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
