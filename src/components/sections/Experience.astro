---
import AstroIcon from '@/components/icons/AstroIcon.astro'
import CalendarIcon from '@/components/icons/CalendarIcon.astro'
import ExpressJsIcon from '@/components/icons/ExpressJsIcon.astro'
import MongoDBIcon from '@/components/icons/MongoDBIcon.astro'
import NextJsIcon from '@/components/icons/NextJsIcon.astro'
import ReactIcon from '@/components/icons/ReactIcon.astro'
import TailwindIcon from '@/components/icons/TailwindIcon.astro'
import Badge from '@/components/ui/Badge.astro'
import { sectionIds, useTranslations } from '@/i18n'

const lang = Astro.locals.lang
const t = useTranslations(lang)

const experiences = [
  {
    title: t('experience.job.title'),
    company: t('experience.job.company'),
    period: t('experience.job.period'),
    description: t('experience.job.description'),
    technologies: [
      { label: 'React', icon: ReactIcon },
      { label: 'Next.js', icon: NextJsIcon },
      { label: 'Astro', icon: AstroIcon },
      { label: 'Tailwind CSS', icon: TailwindIcon },
      { label: 'MongoDB', icon: MongoDBIcon },
      { label: 'Express.js', icon: ExpressJsIcon },
    ],
  },
]
---

<section id={sectionIds[lang].experience} class="relative py-25 px-6">
  <div class="max-w-screen-md mx-auto">
    <div class="text-center mb-12">
      <Badge class="mb-4" data-i18n="experience.badge">{t('experience.badge')}</Badge>
      <h2 class="text-4xl sm:text-5xl font-bold tracking-tight" data-i18n="experience.title">
        {t('experience.title')}
      </h2>
      <p class="text-muted-foreground mt-2 sm:mt-4 text-lg" data-i18n="experience.subtitle">
        {t('experience.subtitle')}
      </p>
    </div>

    <div class="relative">
      {
        experiences.map((exp) => (
          <div class="relative pl-8 not-last:pb-12">
            <div class="absolute left-0 top-2.5 h-full w-[2px] bg-border group-first:h-[calc(100%-24px)] group-first:top-6">
              <div class="absolute h-3 w-3 -left-[5px] top-0 rounded-full border-2 border-primary bg-background" />
            </div>

            <div class="space-y-3">
              <div class="flex items-center gap-3">
                <div class="flex-shrink-0 size-9 bg-border rounded-full flex items-center justify-center overflow-hidden">
                  <img
                    src="/images/logo-marketing-vip.webp"
                    alt="Marketing VIP CO"
                    class="w-full h-full object-cover rounded-full"
                  />
                </div>
                <a
                  href="https://marketingvip.co"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="hover:underline font-semibold"
                >
                  <span class="text-md" data-i18n="experience.job.company">
                    {exp.company}
                  </span>
                </a>
              </div>
              <div>
                <h3 class="text-xl font-medium text-primary" data-i18n="experience.job.title">
                  {exp.title}
                </h3>
                <div class="flex items-center gap-2 mt-1 text-sm">
                  <CalendarIcon class="size-4 leading-none" />
                  <span class="leading-none" data-i18n="experience.job.period">
                    {exp.period}
                  </span>
                </div>
              </div>
              <p class="text-muted-foreground" data-i18n="experience.job.description">
                {exp.description}
              </p>
              <div class="flex flex-wrap gap-2">
                {exp.technologies.map(({ label, icon: Icon }) => (
                  <Badge key={label} variant="outline" class="flex items-center gap-1">
                    {Icon && <Icon class="size-3" />}
                    {label}
                  </Badge>
                ))}
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
